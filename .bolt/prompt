### âœ… AutenticaÃ§Ã£o e Rotas Protegidas

- AutenticaÃ§Ã£o via **Supabase Auth**
- Login por **e-mail/senha** ou **Gmail** (sem verificaÃ§Ã£o de senha via Gmail)
- Sem Stripe no onboarding
- Rotas protegidas:
  - `/favoritos`
  - `/usuario`
  - SolicitaÃ§Ã£o de laudo
  - PÃ¡gina de alertas
- Acesso ao `/admin` restrito por role `admin`

---

### âœ… Banco de Dados (Supabase)

Tabelas principais:

- `lots_property` (imÃ³veis)
- `lots_vehicle` (veÃ­culos)

Outras tabelas (ainda nÃ£o criadas):

- `favorites`
- `user_profiles`
- `alerts`
- `laudos`

---

### ğŸ  Filtros de ImÃ³veis (`lots_property`)

- Filtros combinados via lÃ³gica `AND`
- Desktop: aplicaÃ§Ã£o automÃ¡tica
- Mobile: aplicaÃ§Ã£o apÃ³s clicar em "Aplicar"

#### Filtros:

1. `format`: seleÃ§Ã£o Ãºnica
2. `origin`: mÃºltipla escolha
3. `stage`: mÃºltipla escolha
4. `state`: seleÃ§Ã£o Ãºnica
5. `city`: dependente de `state`
6. `useful_area_m2`: range numÃ©rico
7. `initial_bid_value`: range numÃ©rico

---

### ğŸš— Filtros de VeÃ­culos (`lots_vehicle`)

Mesmo comportamento dos imÃ³veis.

#### Filtros:

1. `format`: seleÃ§Ã£o Ãºnica
2. `origin`: mÃºltipla escolha
3. `stage`: mÃºltipla escolha
4. `state`: seleÃ§Ã£o Ãºnica
5. `city`: dependente de `state`
6. `brand`: dependente do tipo
7. `model`: dependente da marca
8. `color`: seleÃ§Ã£o Ãºnica (bolinhas)
9. `year`: range numÃ©rico
10. `initial_bid_value`: range numÃ©rico

---

### ğŸ”½ OrdenaÃ§Ã£o de Resultados

1. Mais recentes â€” `updated DESC`
2. Menor preÃ§o â€” `initial_bid_value ASC`
3. Maior preÃ§o â€” `initial_bid_value DESC`
4. Maior desconto â€” percentual calculado
5. Mais prÃ³ximos â€” `end_date ASC`

---

### ğŸ“„ Outros dados Ãºteis do banco

- `_id`, `image`, `href`, `end_date`, `website`, `updated`, `docs`
- `website_image` â†’ logo da leiloeira
- `appraised_value` â†’ usado no badge de desconto

---

### ğŸ§¾ Status da Listagem

**Exemplo exibido:**

> Encontramos 180 leilÃµes em 64 sites Â· 3 novos hoje

- Se `newAuctions === 0`, **omitimos** â€œÂ· novos hojeâ€
- â€œHojeâ€ = leilÃµes com `updated` nas Ãºltimas 24h

**LÃ³gica de cÃ¡lculo:**

1. Filtrar apenas leilÃµes com `end_date >= now`
2. Calcular:
   - `totalAuctions`: quantidade total apÃ³s filtro
   - `newAuctions`: baseados no campo `updated`
   - `totalSites`: baseados em `website` ou `href` (via hostname)

---

### ğŸ•“ Listagem pÃºblica

Na **listagem pÃºblica**, os leilÃµes que jÃ¡ passaram da data **sÃ£o automaticamente ocultados** â€” ou seja, se o evento jÃ¡ aconteceu, o leilÃ£o some da busca.

---

### ğŸ”— Campos obrigatÃ³rios nos cards

#### ImÃ³veis:
- `image`, `property_type`, `useful_area_m2`, `property_address`, `city`, `state`
- `initial_bid_value`, `origin`, `stage`, `end_date`, `href`

#### VeÃ­culos:
- `image`, `vehicle_type`, `brand`, `model`, `color`, `year`, `city`, `state`
- `initial_bid_value`, `origin`, `stage`, `end_date`, `href`

---

### ğŸ·ï¸ Badge de Desconto

- CÃ¡lculo: `((appraised_value - initial_bid_value) / appraised_value) * 100`
- SÃ³ aparece se for **maior que 0%**
- Nunca exibir "0%" ou badge vazio
- Requer campo `appraised_value`

---

### Badge â€œNovoâ€ 

Regras de exibiÃ§Ã£o:

- O badge sÃ³ aparece se o leilÃ£o tiver sido coletado (`data_scraped`) **nas Ãºltimas 24 horas** em relaÃ§Ã£o Ã  hora atual.
- O badge deve aparecer **independente de estar na pÃ¡gina buscador ou favoritos**, desde que o card esteja visÃ­vel.
- Aparece tanto em cards horizontais quanto verticais, imÃ³veis ou veÃ­culos.

---

### âœ‚ï¸ Truncamento de texto nos cards

#### ImÃ³veis:
- Linha 1: `property_type` pode truncar se invadir espaÃ§o do botÃ£o favorito
- Linha 2: sÃ³ `property_address` pode truncar (cidade e estado **nunca**)

#### VeÃ­culos:
- Linha 1: `model` pode truncar
- Linha 2: sÃ³ `city` pode truncar (estado **nunca**)